(this.webpackJsonprenzomledesma=this.webpackJsonprenzomledesma||[]).push([[0],{59:function(e,t,a){e.exports=a(94)},64:function(e,t,a){},65:function(e,t,a){},67:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(30),l=a.n(c),o=(a(64),a(52)),i=a(4),u=(a(65),a(14)),s=a(7),m=a(24),p=a(40),f=a.n(p),d=a(53),h=a(54),b=a.n(h);var E=function(e){var t=Object(n.useState)(e),a=Object(i.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),u=o[0],s=o[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],E=p[1],O=Object(n.useState)(!1),v=Object(i.a)(O,2),j=v[0],g=v[1],y=Object(n.useState)(!1),k=Object(i.a)(y,2),x=k[0],C=k[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(!0),C(!1);try{b.a.parse(r,{download:!0,header:!0,complete:function(e){e.errors.length>0&&e.errors.map((function(e){return console.log(e)})),s(e.data);var t=Object.keys(e.data[0]);t.shift(),E(t)}})}catch(t){console.log(t),C(!0)}g(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),[{data:u,regions:h,isLoading:j,isError:x},c]},O=function(e){for(var t=e[0],a=e[0],n=e.length;n--;)isNaN(e[n])||(t=e[n]<t?e[n]:t,a=e[n]>a?e[n]:a);return{min:t,max:a}},v=function(e,t,a,n,r){return a+(n-a)*((r-e)/(t-e))},j=a(17),g=a(25),y=(a(67),r.a.forwardRef((function(e,t){var a=e.children,n=e.onClick;return r.a.createElement(s.a,{href:"",ref:t,onClick:function(e){e.preventDefault(),n(e)}},a)}))),k=r.a.forwardRef((function(e,t){var a=e.children,c=e.style,l=e.className,o=e["aria-labelledby"],u=Object(n.useState)(""),s=Object(i.a)(u,2),m=s[0],p=s[1];return r.a.createElement("div",{ref:t,style:c,className:l,"aria-labelledby":o},r.a.createElement(j.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return p(e.target.value)},value:m}),r.a.createElement("ul",{className:"list-unstyled"},r.a.Children.toArray(a).filter((function(e){return!m||e.props.children.toLowerCase().startsWith(m)}))))})),x=function(e){var t=e.regions,a=e.callback,c=Object(n.useState)(""),l=Object(i.a)(c,2),o=(l[0],l[1]),u=function(e){a(e)},s=0;return r.a.createElement("div",null,r.a.createElement(g.a,{onSelect:function(e){o(t[e]),u(t[e])}},r.a.createElement(g.a.Toggle,{as:y,id:"dropdown-custom-components"},"Choose country"),r.a.createElement(g.a.Menu,{as:k,className:"dropdown-scroll"},t.map((function(e){return r.a.createElement(g.a.Item,{eventKey:s++,key:s},e)})))))},C=a(9),M=a(10),S=a(13),I=a(12),N=a(19),w=function(e){Object(S.a)(a,e);var t=Object(I.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(M.a)(a,[{key:"render",value:function(){var e=this.props;if(!e.visualize)return r.a.createElement("div",null);var t=e.height,a=e.animation,n=e.colorRange,c=e.gridLineColor,l=e.data,o=e.onMouseLeave,i=e.onNearestX,u=e.onValueClick,s=e.xAxisTitle,m=e.yAxisTitle,p=e.yAxisLeft;return r.a.createElement(N.a,{height:t,onMouseLeave:o,colorRange:n,animation:a},r.a.createElement(N.b,{style:{stroke:c}}),r.a.createElement(N.d,{style:{stroke:c}}),r.a.createElement(N.c,{data:l,onNearestX:i,onValueClick:u}),r.a.createElement(N.e,{title:s}),r.a.createElement(N.f,{title:m,left:p}))}}]),a}(n.Component),T=a(8),P=function(e){Object(S.a)(a,e);var t=Object(I.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(M.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(T.a,null,r.a.createElement(T.a.Prepend,null,r.a.createElement(T.a.Text,null,"Playback BPM")),r.a.createElement(j.a,{placeholder:"Ex: 200","aria-label":"BPM",onChange:function(t){return e.props.handleInput(t,e.props.setBpm)}})),r.a.createElement("p",null,"Current BPM: ",r.a.createElement("strong",null,this.props.bpm)))}}]),a}(n.Component),D=function(e){Object(S.a)(a,e);var t=Object(I.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(M.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(s.a,{variant:"primary",onClick:function(){return e.props.setOscSelection((e.props.oscSelection+1)%e.props.oscTypes.length)}},"Toggle oscillator")}}]),a}(n.Component),L=function(e){Object(S.a)(a,e);var t=Object(I.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(M.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(m.a,{"aria-label":"Increase/decrease pitch"},r.a.createElement(s.a,{variant:"secondary",onClick:function(){return e.props.setPitch(e.props.pitch-1)}},"Decrease pitch"),r.a.createElement(s.a,{variant:"secondary",onClick:function(){return e.props.setPitch(e.props.pitch+1)}},"Increase pitch"))}}]),a}(n.Component),A=function(e){Object(S.a)(a,e);var t=Object(I.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(M.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(T.a,null,r.a.createElement(T.a.Prepend,null,r.a.createElement(T.a.Text,null,"Minimum MIDI pitch")),r.a.createElement(j.a,{placeholder:"Ex: 0","aria-label":"Minimum MIDI pitch",onChange:function(t){return e.props.handleInput(t,e.props.setMinMidiPitch)}})),r.a.createElement(T.a,null,r.a.createElement(T.a.Prepend,null,r.a.createElement(T.a.Text,null,"Maximum MIDI pitch")),r.a.createElement(j.a,{placeholder:"Ex: 127","aria-label":"Maximum MIDI pitch",onChange:function(t){return e.props.handleInput(t,e.props.setMaxMidiPitch)}})))}}]),a}(n.Component),R=["sine","triangle","square","sawtooth"];var B=function(){var e=E("https://covid.ourworldindata.org/data/ecdc/total_cases.csv"),t=Object(i.a)(e,1)[0],a=t.data,c=t.regions,l=t.isLoading,p=t.isError,f=Object(n.useState)(""),d=Object(i.a)(f,2),h=d[0],b=d[1],j=Object(n.useState)([]),g=Object(i.a)(j,2),y=g[0],k=g[1],C=Object(n.useState)(0),M=Object(i.a)(C,2),S=M[0],I=M[1],N=Object(n.useState)(0),T=Object(i.a)(N,2),B=T[0],z=T[1],V=Object(n.useState)(!0),q=Object(i.a)(V,2),F=q[0],W=q[1],X=Object(n.useState)(!1),J=Object(i.a)(X,2),K=J[0],$=J[1],_=Object(n.useState)(-1),G=Object(i.a)(_,2),H=G[0],Q=G[1],U=Object(n.useState)(""),Y=Object(i.a)(U,2),Z=Y[0],ee=Y[1],te=Object(n.useState)(60),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(1),le=Object(i.a)(ce,2),oe=le[0],ie=le[1],ue=Object(n.useState)(36),se=Object(i.a)(ue,2),me=se[0],pe=se[1],fe=Object(n.useState)(96),de=Object(i.a)(fe,2),he=de[0],be=de[1],Ee=Object(n.useState)(999),Oe=Object(i.a)(Ee,2),ve=Oe[0],je=Oe[1],ge=Object(n.useRef)(null);function ye(e){var t=v(S,B,me,he,e);return Math.floor(t)}function ke(e){ge.current.triggerAttackRelease(u.Frequency(e,"midi"),"8n")}function xe(e,t){var a=parseInt(e.target.value);isNaN(a)||t(a)}Object(n.useEffect)((function(){var e={oscillator:{type:R[oe]}};ge.current=new u.Synth(e).toMaster()}));var Ce=0;return r.a.createElement("div",{className:"body"},r.a.createElement("h1",null,"COVID-19 Data Sonification"),r.a.createElement("h3",null,"Display data:"),r.a.createElement("p",null,l?"Loading data...":null),r.a.createElement("p",null,p?"An error occurred.":null),r.a.createElement("p",null,"Min/max amount: ",S,"/",B),r.a.createElement("p",null,"Current amount: ",-1===H?"None":"".concat(H," cases at ").concat(Z)),r.a.createElement("h4",null,"Current region: ",h),r.a.createElement(m.a,null,r.a.createElement(x,{regions:c,callback:function(e){b(e),function(e){var t,n=[],r=[],c=0,l=Object(o.a)(a);try{for(l.s();!(t=l.n()).done;){var i=t.value;n.push({date:i.date,amount:parseInt(i[e]),index:c++}),r.push(parseInt(i[e]))}}catch(s){l.e(s)}finally{l.f()}n.filter((function(e){return!isNaN(e.amount)})),k(n);var u=O(r.filter((function(e){return!isNaN(e)})));I(u.min),z(u.max)}(e)}}),r.a.createElement(s.a,{onClick:function(){return W(!F)}},"Toggle visualization"),r.a.createElement(s.a,{onClick:function(){return $(!K)}},"Toggle animation (affects performance)")),0!==y.length&&r.a.createElement(m.a,null,r.a.createElement(s.a,{variant:"success",onClick:function(){return function(){u.Transport.cancel();var e=y.map((function(e){return{note:ye(e.amount),date:e.date,index:e.index}})).filter((function(e){return!isNaN(e.note)})),t=new u.Pattern((function(e,a){ge.current.triggerAttackRelease(u.Frequency(a.note,"midi"),.25),Q(y[a.index].amount),ee(a.date),t.index===t.values.length-1&&u.Transport.cancel()}),e);t.start(0),u.Transport.bpm.value=ve,u.Transport.start()}()}},"Play"),r.a.createElement(s.a,{variant:"danger",onClick:function(){return u.Transport.cancel()}},"Stop")),r.a.createElement(w,{visualize:F,height:400,animation:K,colorRange:["yellow","cornflowerblue"],gridLineColor:"#B7E9ED",data:function(e){return e.filter((function(e){return!isNaN(e.amount)})).map((function(e){return{x:e.index,y:e.amount,color:e.amount===H?0:1}}))}(y),onMouseLeave:function(){return Q(-1)},onNearestX:function(e,t){var a=t.index;Q(e.y),ee(y[a].date)},onValueClick:function(e){ke(ye(e.y))},xAxisTitle:"Days since December 31, 2019",yAxisTitle:"Total amount of cases",yAxisLeft:50}),r.a.createElement("h3",null,"Options:"),r.a.createElement(s.a,{variant:"info",onClick:function(){return ke(ne)}},"Play test pitch"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(L,{setPitch:re,pitch:ne}),r.a.createElement("p",null,"The current MIDI pitch is: ",r.a.createElement("strong",null,ne)),r.a.createElement(D,{setOscSelection:ie,oscSelection:oe,oscTypes:R}),r.a.createElement("p",null,"The current oscillator is: ",r.a.createElement("strong",null,R[oe])),r.a.createElement("br",null),r.a.createElement(A,{handleInput:xe,setMinMidiPitch:pe,setMaxMidiPitch:be}),r.a.createElement("p",null,"Min/max MIDI pitch: ",r.a.createElement("strong",null,"[",me,", ",he,"]")),r.a.createElement(P,{bpm:ve,setBpm:je,handleInput:xe}),0!==y.length&&r.a.createElement("h2",null,"Raw data"),r.a.createElement("ul",null,0!==y.length&&y.map((function(e){return r.a.createElement("li",{key:Ce++},e.date,": ",r.a.createElement("strong",null,isNaN(e.amount)?"No data":e.amount))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(93);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.b08514d3.chunk.js.map