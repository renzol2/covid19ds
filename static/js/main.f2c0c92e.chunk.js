(this.webpackJsonprenzomledesma=this.webpackJsonprenzomledesma||[]).push([[0],{55:function(e,t,a){e.exports=a(90)},60:function(e,t,a){},61:function(e,t,a){},85:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(25),l=a.n(c),o=(a(60),a(48)),u=a(4),i=(a(61),a(9)),s=a(14),m=a(7),f=a(28),d=a(10),E=a(16),b=a(36),p=a.n(b),h=a(50),g=a(51),O=a.n(g),j=function(e){var t=Object(n.useState)(e),a=Object(u.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),i=o[0],s=o[1],m=Object(n.useState)([]),f=Object(u.a)(m,2),d=f[0],E=f[1],b=Object(n.useState)(!1),g=Object(u.a)(b,2),j=g[0],v=g[1],y=Object(n.useState)(!1),k=Object(u.a)(y,2),S=k[0],w=k[1];return Object(n.useEffect)((function(){(function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!0),w(!1);try{O.a.parse(r,{download:!0,header:!0,complete:function(e){e.errors.length>0&&e.errors.map((function(e){return console.log(e)})),s(e.data);var t=Object.keys(e.data[0]);t.shift(),E(t)}})}catch(t){console.log(t),w(!0)}v(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),[{data:i,regions:d,isLoading:j,isError:S},c]},v=function(e){for(var t=e[0],a=e[0],n=e.length;n--;)isNaN(e[n])||(t=e[n]<t?e[n]:t,a=e[n]>a?e[n]:a);return{min:t,max:a}},y=function(e,t,a,n,r){return a+(n-a)*((r-e)/(t-e))},k=a(20),S=(a(85),r.a.forwardRef((function(e,t){var a=e.children,n=e.onClick;return r.a.createElement(m.a,{href:"",ref:t,onClick:function(e){e.preventDefault(),n(e)}},a)}))),w=r.a.forwardRef((function(e,t){var a=e.children,c=e.style,l=e.className,o=e["aria-labelledby"],i=Object(n.useState)(""),s=Object(u.a)(i,2),m=s[0],f=s[1];return r.a.createElement("div",{ref:t,style:c,className:l,"aria-labelledby":o},r.a.createElement(E.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return f(e.target.value)},value:m}),r.a.createElement("ul",{className:"list-unstyled"},r.a.Children.toArray(a).filter((function(e){return!m||e.props.children.toLowerCase().startsWith(m)}))))})),x=function(e){var t=e.regions,a=e.callback,c=Object(n.useState)(""),l=Object(u.a)(c,2),o=(l[0],l[1]),i=function(e){a(e)},s=0;return r.a.createElement("div",null,r.a.createElement(k.a,{onSelect:function(e){o(t[e]),i(t[e])}},r.a.createElement(k.a.Toggle,{as:S,id:"dropdown-custom-components"},"Choose country"),r.a.createElement(k.a.Menu,{as:w,className:"dropdown-scroll"},t.map((function(e){return r.a.createElement(k.a.Item,{eventKey:s++,key:s},e)})))))},N=["sine","triangle","square","sawtooth"],C=function(){var e=j("https://covid.ourworldindata.org/data/ecdc/total_cases.csv"),t=Object(u.a)(e,1)[0],a=t.data,c=t.regions,l=t.isLoading,b=t.isError,p=Object(n.useState)(""),h=Object(u.a)(p,2),g=h[0],O=h[1],k=Object(n.useState)([]),S=Object(u.a)(k,2),w=S[0],C=S[1],I=Object(n.useState)(0),M=Object(u.a)(I,2),T=M[0],D=M[1],P=Object(n.useState)(0),B=Object(u.a)(P,2),R=B[0],L=B[1],A=Object(n.useState)(!0),q=Object(u.a)(A,2),z=q[0],F=q[1],W=Object(n.useState)(!1),J=Object(u.a)(W,2),V=J[0],K=J[1],X=Object(n.useState)(-1),$=Object(u.a)(X,2),_=$[0],G=$[1],H=Object(n.useState)(""),Q=Object(u.a)(H,2),U=Q[0],Y=Q[1],Z=Object(n.useState)(60),ee=Object(u.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(1),re=Object(u.a)(ne,2),ce=re[0],le=re[1],oe=Object(n.useState)(36),ue=Object(u.a)(oe,2),ie=ue[0],se=ue[1],me=Object(n.useState)(96),fe=Object(u.a)(me,2),de=fe[0],Ee=fe[1],be=Object(n.useState)(999),pe=Object(u.a)(be,2),he=pe[0],ge=pe[1],Oe=Object(n.useRef)(null);Object(n.useEffect)((function(){var e={oscillator:{type:N[ce]}};Oe.current=new i.Synth(e).toMaster()}));var je=function(e){var t,n=[],r=[],c=0,l=Object(o.a)(a);try{for(l.s();!(t=l.n()).done;){var u=t.value;n.push({date:u.date,amount:parseInt(u[e]),index:c++}),r.push(parseInt(u[e]))}}catch(s){l.e(s)}finally{l.f()}n.filter((function(e){return!isNaN(e.amount)})),C(n);var i=v(r.filter((function(e){return!isNaN(e)})));D(i.min),L(i.max)};function ve(e){var t=y(T,R,ie,de,e);return Math.floor(t)}var ye=function(e){Oe.current.triggerAttackRelease(i.Frequency(e,"midi"),"8n")},ke=function(e,t){var a=parseInt(e.target.value);isNaN(a)||t(a)},Se=0;return r.a.createElement("div",{className:"body"},r.a.createElement("h1",null,"COVID-19 Data Sonification"),r.a.createElement("h3",null,"Display data:"),r.a.createElement("p",null,l?"Loading data...":null),r.a.createElement("p",null,b?"An error occurred.":null),r.a.createElement("p",null,"Min/max amount: ",T,"/",R),r.a.createElement("p",null,"Current amount: ",-1===_?"None":"".concat(_," cases at ").concat(U)),r.a.createElement("h4",null,"Current region: ",g),r.a.createElement(f.a,null,r.a.createElement(x,{regions:c,callback:function(e){O(e),je(e)}}),r.a.createElement(m.a,{onClick:function(){return F(!z)}},"Toggle visualization"),r.a.createElement(m.a,{onClick:function(){return K(!V)}},"Toggle animation (affects performance)")),r.a.createElement("br",null),0===w.length?null:r.a.createElement(f.a,null,r.a.createElement(m.a,{variant:"success",onClick:function(){return function(){i.Transport.cancel();var e=w.map((function(e){return{note:ve(e.amount),date:e.date,index:e.index}})).filter((function(e){return!isNaN(e.note)})),t=new i.Pattern((function(e,a){Oe.current.triggerAttackRelease(i.Frequency(a.note,"midi"),.25),G(w[a.index].amount),Y(a.date),t.index===t.values.length-1&&i.Transport.cancel()}),e);t.start(0),i.Transport.bpm.value=he,i.Transport.start()}()}},"Play"),r.a.createElement(m.a,{variant:"danger",onClick:function(){return i.Transport.cancel()}},"Stop")),z&&r.a.createElement(s.a,{height:400,onMouseLeave:function(){return G(-1)},colorRange:["yellow","cornflowerblue"],animation:V},r.a.createElement(s.b,{style:{stroke:"#B7E9ED"}}),r.a.createElement(s.d,{style:{stroke:"#B7E9ED"}}),r.a.createElement(s.c,{data:function(e){return e.filter((function(e){return!isNaN(e.amount)})).map((function(e){return{x:e.index,y:e.amount,color:e.amount===_?0:1}}))}(w),onNearestX:function(e,t){var a=t.index;G(e.y),Y(w[a].date)},onValueClick:function(e){ye(ve(e.y))}}),r.a.createElement(s.e,{title:"Days since December 31, 2019"}),r.a.createElement(s.f,{title:"Total amount of cases",left:50})),r.a.createElement("h3",null,"Options:"),r.a.createElement(m.a,{variant:"info",onClick:function(){return ye(te)}},"Play test pitch"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.a,{"aria-label":"Increase/decrease pitch"},r.a.createElement(m.a,{variant:"secondary",onClick:function(){return ae(te-1)}},"Decrease pitch"),r.a.createElement(m.a,{variant:"secondary",onClick:function(){return ae(te+1)}},"Increase pitch")),r.a.createElement("p",null,"The current MIDI pitch is: ",r.a.createElement("strong",null,te)),r.a.createElement(m.a,{variant:"primary",onClick:function(){return le((ce+1)%N.length)}},"Toggle oscillator"),r.a.createElement("p",null,"The current oscillator is: ",r.a.createElement("strong",null,N[ce])),r.a.createElement("br",null),r.a.createElement(d.a,null,r.a.createElement(d.a.Prepend,null,r.a.createElement(d.a.Text,null,"Minimum MIDI pitch")),r.a.createElement(E.a,{placeholder:"Ex: 0","aria-label":"Minimum MIDI pitch",onChange:function(e){return ke(e,se)}})),r.a.createElement(d.a,null,r.a.createElement(d.a.Prepend,null,r.a.createElement(d.a.Text,null,"Maximum MIDI pitch")),r.a.createElement(E.a,{placeholder:"Ex: 127","aria-label":"Maximum MIDI pitch",onChange:function(e){return ke(e,Ee)}})),r.a.createElement("p",null,"Min/max MIDI pitch: ",r.a.createElement("strong",null,"[",ie,", ",de,"]")),r.a.createElement(d.a,null,r.a.createElement(d.a.Prepend,null,r.a.createElement(d.a.Text,null,"Playback BPM")),r.a.createElement(E.a,{placeholder:"Ex: 200","aria-label":"BPM",onChange:function(e){return ke(e,ge)}})),r.a.createElement("p",null,"Current BPM: ",r.a.createElement("strong",null,he)),0!==w.length&&r.a.createElement("h2",null,"Raw data"),r.a.createElement("ul",null,0!==w.length&&w.map((function(e){return r.a.createElement("li",{key:Se++},e.date,": ",r.a.createElement("strong",null,isNaN(e.amount)?"No data":e.amount))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(89);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.f2c0c92e.chunk.js.map