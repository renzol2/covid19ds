(this.webpackJsonprenzomledesma=this.webpackJsonprenzomledesma||[]).push([[0],{55:function(e,t,a){e.exports=a(90)},60:function(e,t,a){},61:function(e,t,a){},85:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(25),l=a.n(c),o=(a(60),a(47)),u=a(4),i=(a(61),a(9)),s=a(14),m=a(7),f=a(52),d=a(10),E=a(16),p=a(35),b=a.n(p),h=a(49),g=a(50),O=a.n(g),j=function(e){var t=Object(n.useState)(e),a=Object(u.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),i=o[0],s=o[1],m=Object(n.useState)([]),f=Object(u.a)(m,2),d=f[0],E=f[1],p=Object(n.useState)(!1),g=Object(u.a)(p,2),j=g[0],v=g[1],y=Object(n.useState)(!1),k=Object(u.a)(y,2),w=k[0],x=k[1];return Object(n.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!0),x(!1);try{O.a.parse(r,{download:!0,header:!0,complete:function(e){e.errors.length>0&&e.errors.map((function(e){return console.log(e)})),s(e.data);var t=Object.keys(e.data[0]);t.shift(),E(t)}})}catch(t){console.log(t),x(!0)}v(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),[{data:i,regions:d,isLoading:j,isError:w},c]},v=function(e){for(var t=e[0],a=e[0],n=e.length;n--;)isNaN(e[n])||(t=e[n]<t?e[n]:t,a=e[n]>a?e[n]:a);return{min:t,max:a}},y=function(e,t,a,n,r){return a+(n-a)*((r-e)/(t-e))},k=a(20),w=(a(85),r.a.forwardRef((function(e,t){var a=e.children,n=e.onClick;return r.a.createElement(m.a,{href:"",ref:t,onClick:function(e){e.preventDefault(),n(e)}},a)}))),x=r.a.forwardRef((function(e,t){var a=e.children,c=e.style,l=e.className,o=e["aria-labelledby"],i=Object(n.useState)(""),s=Object(u.a)(i,2),m=s[0],f=s[1];return r.a.createElement("div",{ref:t,style:c,className:l,"aria-labelledby":o},r.a.createElement(E.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return f(e.target.value)},value:m}),r.a.createElement("ul",{className:"list-unstyled"},r.a.Children.toArray(a).filter((function(e){return!m||e.props.children.toLowerCase().startsWith(m)}))))})),N=function(e){var t=e.regions,a=e.callback,c=Object(n.useState)(""),l=Object(u.a)(c,2),o=(l[0],l[1]),i=function(e){a(e)},s=0;return r.a.createElement("div",null,r.a.createElement(k.a,{onSelect:function(e){o(t[e]),i(t[e])}},r.a.createElement(k.a.Toggle,{as:w,id:"dropdown-custom-components"},"Choose country"),r.a.createElement(k.a.Menu,{as:x,className:"dropdown-scroll"},t.map((function(e){return r.a.createElement(k.a.Item,{eventKey:s++,key:s},e)})))))},S=["sine","triangle","square","sawtooth"],C=function(){var e=j("https://covid.ourworldindata.org/data/ecdc/total_cases.csv"),t=Object(u.a)(e,2),a=t[0],c=a.data,l=a.regions,p=a.isLoading,b=a.isError,h=(t[1],Object(n.useState)("")),g=Object(u.a)(h,2),O=g[0],k=g[1],w=Object(n.useState)([]),x=Object(u.a)(w,2),C=x[0],I=x[1],M=Object(n.useState)(0),D=Object(u.a)(M,2),T=D[0],P=D[1],B=Object(n.useState)(0),R=Object(u.a)(B,2),L=R[0],A=R[1],q=Object(n.useState)(!0),z=Object(u.a)(q,2),F=z[0],W=z[1],J=Object(n.useState)(-1),K=Object(u.a)(J,2),V=K[0],X=K[1],$=Object(n.useState)(60),_=Object(u.a)($,2),G=_[0],H=_[1],Q=Object(n.useState)(1),U=Object(u.a)(Q,2),Y=U[0],Z=U[1],ee=Object(n.useState)(36),te=Object(u.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(96),ce=Object(u.a)(re,2),le=ce[0],oe=ce[1],ue=Object(n.useState)(999),ie=Object(u.a)(ue,2),se=ie[0],me=ie[1],fe=Object(n.useRef)(null);Object(n.useEffect)((function(){var e={oscillator:{type:S[Y]}};fe.current=new i.Synth(e).toMaster()}));var de=function(e){var t,a=[],n=[],r=0,l=Object(o.a)(c);try{for(l.s();!(t=l.n()).done;){var u=t.value;a.push({date:u.date,amount:parseInt(u[e]),index:r++}),n.push(parseInt(u[e]))}}catch(s){l.e(s)}finally{l.f()}a.filter((function(e){return!isNaN(e.amount)})),I(a);var i=v(n.filter((function(e){return!isNaN(e)})));P(i.min),A(i.max)},Ee=function(e,t){var a=parseInt(e.target.value);isNaN(a)||t(a)},pe=0;return r.a.createElement("div",{className:"body"},r.a.createElement("h1",null,"COVID-19 Data Sonification"),r.a.createElement("h3",null,"Display data:"),r.a.createElement("p",null,p?"Loading data...":null),r.a.createElement("p",null,b?"An error occurred.":null),r.a.createElement("p",null,"Min/max amount: ",T,"/",L),r.a.createElement("p",null,"Current amount: ",-1===V?"None":V),r.a.createElement("h4",null,"Current region: ",O),r.a.createElement(N,{regions:l,callback:function(e){k(e),de(e)}}),r.a.createElement(m.a,{onClick:function(){return W(!F)}},"Toggle visualization"),0===C.length?null:r.a.createElement("div",null,r.a.createElement(m.a,{variant:"success",onClick:function(){return function(){i.Transport.cancel();var e=C.map((function(e){return{note:Math.floor(y(T,L,ae,le,e.amount)),index:e.index}})).filter((function(e){return!isNaN(e.note)})),t=new i.Pattern((function(e,a){fe.current.triggerAttackRelease(i.Frequency(a.note,"midi"),.25),X(C[a.index].amount),t.index===t.values.length-1&&i.Transport.cancel()}),e);t.start(0),i.Transport.bpm.value=se,i.Transport.start()}()}},"Play"),r.a.createElement(m.a,{variant:"danger",onClick:function(){return i.Transport.cancel()}},"Stop")),F&&r.a.createElement(s.a,{height:400,onMouseLeave:function(){return X(-1)},colorRange:["yellow","cornflowerblue"]},r.a.createElement(s.b,{style:{stroke:"#B7E9ED"}}),r.a.createElement(s.d,{style:{stroke:"#B7E9ED"}}),r.a.createElement(s.c,{data:function(e){return e.filter((function(e){return!isNaN(e.amount)})).map((function(e){return{x:e.index,y:e.amount,color:e.amount===V?0:1}}))}(C),onNearestX:function(e,t){t.index;X(e.y)}}),r.a.createElement(s.e,{title:"Days since December 31, 2019"}),r.a.createElement(s.f,{title:"Total amount of cases",left:50})),r.a.createElement("h3",null,"Options:"),r.a.createElement(m.a,{variant:"info",onClick:function(){fe.current.triggerAttackRelease(i.Frequency(G,"midi"),"8n")}},"Play test pitch"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.a,{"aria-label":"Increase/decrease pitch"},r.a.createElement(m.a,{variant:"secondary",onClick:function(){return H(G-1)}},"Decrease pitch"),r.a.createElement(m.a,{variant:"secondary",onClick:function(){return H(G+1)}},"Increase pitch")),r.a.createElement("p",null,"The current MIDI pitch is: ",r.a.createElement("strong",null,G)),r.a.createElement(m.a,{variant:"primary",onClick:function(){return Z((Y+1)%S.length)}},"Toggle oscillator"),r.a.createElement("p",null,"The current oscillator is: ",r.a.createElement("strong",null,S[Y])),r.a.createElement("br",null),r.a.createElement(d.a,null,r.a.createElement(d.a.Prepend,null,r.a.createElement(d.a.Text,null,"Minimum MIDI pitch")),r.a.createElement(E.a,{placeholder:"Ex: 0","aria-label":"Minimum MIDI pitch",onChange:function(e){return Ee(e,ne)}})),r.a.createElement(d.a,null,r.a.createElement(d.a.Prepend,null,r.a.createElement(d.a.Text,null,"Maximum MIDI pitch")),r.a.createElement(E.a,{placeholder:"Ex: 127","aria-label":"Maximum MIDI pitch",onChange:function(e){return Ee(e,oe)}})),r.a.createElement("p",null,"Min/max MIDI pitch: ",r.a.createElement("strong",null,"[",ae,", ",le,"]")),r.a.createElement(d.a,null,r.a.createElement(d.a.Prepend,null,r.a.createElement(d.a.Text,null,"Playback BPM")),r.a.createElement(E.a,{placeholder:"Ex: 200","aria-label":"BPM",onChange:function(e){return Ee(e,me)}})),r.a.createElement("p",null,"Current BPM: ",r.a.createElement("strong",null,se)),0!==C.length&&r.a.createElement("h2",null,"Raw data"),r.a.createElement("ul",null,0!==C.length&&C.map((function(e){return r.a.createElement("li",{key:pe++},e.date,": ",r.a.createElement("strong",null,isNaN(e.amount)?"No data":e.amount))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(89);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.fdf61c81.chunk.js.map